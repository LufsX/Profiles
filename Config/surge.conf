# æœ¬é…ç½®æ–‡ä»¶åœ°å€: https://ruleset.isteed.cc/Config/surge.conf

# é£Ÿç”¨è¯´æ˜:
# å°† [Proxy Group] ä¸­çš„ https://example.com/sub æ›¿æ¢ä¸ºä½ çš„è®¢é˜…åœ°å€

# å®˜æ–¹æ–‡æ¡£: https://manual.nssurge.com

[General]
# æ—¥å¿—ç­‰çº§
loglevel = notify
# å¢å¼ºçš„ Wi-Fi åŠ©ç†
wifi-assist = false
# æ··åˆç½‘ç»œ
all-hybrid = true
# åœ¨é«˜è´Ÿè½½æ—¶ä¼˜å…ˆå¤„ç† UDP æ•°æ®åŒ…ï¼ˆæ¸¸æˆä¼˜åŒ–ï¼‰
udp-priority = true

# å»¶è¿Ÿæµ‹è¯•
test-timeout = 3
internet-test-url = http://connectivitycheck.platform.hicloud.com/generate_204
proxy-test-url = http://cp.cloudflare.com/generate_204

# IPv6 æ”¯æŒ
ipv6 = true

# ä¸Šæ¸¸ DNS åœ°å€
dns-server = 223.6.6.6, 119.29.29.29, system
# è·³è¿‡ä»£ç†
skip-proxy = localhost, *.local, injections.adguard.org, local.adguard.org, captive.apple.com, 0.0.0.0/8, 10.0.0.0/8, 17.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16, ::1/128, fe80::/10
# æ’é™¤ç®€å•ä¸»æœºå
exclude-simple-hostnames = true
# åŒ…å«æ‰€æœ‰ç½‘ç»œè¯·æ±‚
include-all-networks = false
# åŒ…å«æœ¬åœ°ç½‘ç»œè¯·æ±‚
include-local-networks = false

# å…è®¸ Wi-Fi ç½‘ç»œä¸‹çš„å…¶å®ƒè®¾å¤‡è®¿é—®
allow-wifi-access = true
# Surge iOS é»˜è®¤ HTTP/SOCKS5 ç«¯å£ä¸º 6152/6153
wifi-access-http-port = 7767
wifi-access-socks5-port = 7767
# Surge Mac é»˜è®¤ HTTP/SOCKS5 ç«¯å£ä¸º 6152/6153
http-listen = 0.0.0.0:7767
socks5-listen = 0.0.0.0:7766
# å…è®¸çƒ­ç‚¹å…±äº«
allow-hotspot-access = true
# å…è®¸è¿œç¨‹æ§åˆ¶å™¨ç®¡ç†æ§åˆ¶ Surge
external-controller-access = 1145141919810@127.0.0.1:6170
http-api = 1145141919810@127.0.0.1:6166

[Proxy]

ğ·ğ‘–ğ‘Ÿğ‘’ğ‘ğ‘¡ = direct
ğ‘…ğ‘’ğ‘—ğ‘’ğ‘ğ‘¡ = reject
ğ‘…ğ‘’ğ‘—ğ‘’ğ‘ğ‘¡-ğ‘¡ğ‘–ğ‘›ğ‘¦ğ‘”ğ‘–ğ‘“ = reject-tinygif

[Proxy Group]
ğ‘†ğ‘¢ğ‘ = select, hidden=true, policy-path=https://example.com/sub
ğ‘ƒğ‘Ÿğ‘œğ‘¥ğ‘¦ = select, ğ‘†ğ‘šğ‘ğ‘Ÿğ‘¡, ğ‘†ğ‘šğ‘ğ‘Ÿğ‘¡ğ»ğ¾, ğ‘†ğ‘šğ‘ğ‘Ÿğ‘¡ğ½ğ‘ƒ, include-other-group=ğ‘†ğ‘¢ğ‘
ğ‘†ğ‘¡ğ‘Ÿğ‘’ğ‘ğ‘šğ‘–ğ‘›ğ‘” = select, ğ‘ƒğ‘Ÿğ‘œğ‘¥ğ‘¦, include-other-group=ğ‘†ğ‘¢ğ‘
ğ‘†ğ‘¡ğ‘Ÿğ‘’ğ‘ğ‘šğ‘–ğ‘›ğ‘”ğ‘†ğ¸ = select, ğ·ğ‘–ğ‘Ÿğ‘’ğ‘ğ‘¡, ğ‘ƒğ‘Ÿğ‘œğ‘¥ğ‘¦, ğ‘†ğ‘šğ‘ğ‘Ÿğ‘¡ğ»ğ¾, include-other-group=ğ‘†ğ‘¢ğ‘, policy-regex-filter=(?i)(h(ong)?k(ong)?|ta?i?w|macau)|æ¾³é—¨|æ¸¯|å°|ğŸ‡­ğŸ‡°|ğŸ‡²ğŸ‡´|ğŸ‡¹ğŸ‡¼
ğ‘‡ğ‘’ğ‘™ğ‘’ğ‘”ğ‘Ÿğ‘ğ‘š = select, ğ‘ƒğ‘Ÿğ‘œğ‘¥ğ‘¦, ğ‘†ğ‘šğ‘ğ‘Ÿğ‘¡ğ‘†ğº, include-other-group=ğ‘†ğ‘¢ğ‘, policy-regex-filter=(?i)(sg|us|nl|singapore|united|netherland)|æ–°åŠ å¡|è·å…°|ç¾å›½|ç‹®åŸ|ğŸ‡¸ğŸ‡¬|ğŸ‡³ğŸ‡±|ğŸ‡ºğŸ‡¸
ğ´ğ¼ = select, ğ‘ƒğ‘Ÿğ‘œğ‘¥ğ‘¦, ğ‘†ğ‘šğ‘ğ‘Ÿğ‘¡ğ½ğ‘ƒ, include-other-group=ğ‘†ğ‘¢ğ‘, policy-regex-filter=(?i)(jp|japan|u[sk]|america|united|ta?i?w)|[ç¾è‹±]å›½|æ—¥æœ¬|å°|ğŸ‡ºğŸ‡¸|ğŸ‡¬ğŸ‡§|ğŸ‡¯ğŸ‡µ|ğŸ‡¹ğŸ‡¼
ğ´ğ‘ğ‘ğ‘™ğ‘’ = select, ğ·ğ‘–ğ‘Ÿğ‘’ğ‘ğ‘¡, ğ‘ƒğ‘Ÿğ‘œğ‘¥ğ‘¦
ğ‘‚ğ‘›ğ‘’ğ·ğ‘Ÿğ‘–ğ‘£ğ‘’ = select, ğ·ğ‘–ğ‘Ÿğ‘’ğ‘ğ‘¡, ğ‘ƒğ‘Ÿğ‘œğ‘¥ğ‘¦
ğºğ‘¢ğ‘ğ‘Ÿğ‘‘ = select, ğ‘…ğ‘’ğ‘—ğ‘’ğ‘ğ‘¡, ğ‘…ğ‘’ğ‘—ğ‘’ğ‘ğ‘¡-ğ‘¡ğ‘–ğ‘›ğ‘¦ğ‘”ğ‘–ğ‘“, ğ·ğ‘–ğ‘Ÿğ‘’ğ‘ğ‘¡
ğ¹ğ‘–ğ‘›ğ‘ğ‘™ = select, ğ‘ƒğ‘Ÿğ‘œğ‘¥ğ‘¦, ğ·ğ‘–ğ‘Ÿğ‘’ğ‘ğ‘¡
ğ‘†ğ‘šğ‘ğ‘Ÿğ‘¡ = smart, include-other-group=ğ‘†ğ‘¢ğ‘
ğ‘†ğ‘šğ‘ğ‘Ÿğ‘¡ğ»ğ¾ = smart, include-other-group=ğ‘†ğ‘¢ğ‘, policy-regex-filter=(?i)(h(ong)?k(ong)?)|æ¸¯|ğŸ‡­ğŸ‡°
ğ‘†ğ‘šğ‘ğ‘Ÿğ‘¡ğ½ğ‘ƒ = smart, include-other-group=ğ‘†ğ‘¢ğ‘, policy-regex-filter=(?i)(jp|japan)|æ—¥æœ¬|ğŸ‡¯ğŸ‡µ
ğ‘†ğ‘šğ‘ğ‘Ÿğ‘¡ğ‘†ğº = smart, include-other-group=ğ‘†ğ‘¢ğ‘, policy-regex-filter=(?i)(sg|singapore)|æ–°åŠ å¡|ğŸ‡¸ğŸ‡¬

[Rule]
# è‡ªç”¨è§„åˆ™
RULE-SET,https://ruleset.isteed.cc/List/Surge/DirectCustom.conf,ğ·ğ‘–ğ‘Ÿğ‘’ğ‘ğ‘¡,extended-matching
RULE-SET,https://ruleset.isteed.cc/List/Surge/ProxyCustom.conf,ğ‘ƒğ‘Ÿğ‘œğ‘¥ğ‘¦,extended-matching
# åƒåœ¾æœåŠ¡
DOMAIN-SET,https://ruleset.isteed.cc/List/Surge/Guard.conf,ğºğ‘¢ğ‘ğ‘Ÿğ‘‘,extended-matching
RULE-SET,https://ruleset.isteed.cc/List/Surge/GuardPlus.conf,ğºğ‘¢ğ‘ğ‘Ÿğ‘‘,extended-matching
# Unbreak åç»­è§„åˆ™ä¿®æ­£
RULE-SET,https://ruleset.isteed.cc/List/Surge/Unbreak.conf,ğ·ğ‘–ğ‘Ÿğ‘’ğ‘ğ‘¡,extended-matching
# Apple æœåŠ¡
RULE-SET,https://ruleset.isteed.cc/List/Surge/Apple.conf,ğ´ğ‘ğ‘ğ‘™ğ‘’,extended-matching
# Apple CDN
DOMAIN-SET,https://ruleset.isteed.cc/List/Surge/ChinaApple.conf,ğ·ğ‘–ğ‘Ÿğ‘’ğ‘ğ‘¡,extended-matching
# AI Chat
RULE-SET,https://ruleset.isteed.cc/List/Surge/AI.conf,ğ´ğ¼,extended-matching
# Telegram
RULE-SET,https://ruleset.isteed.cc/List/Surge/Telegram.conf,ğ‘‡ğ‘’ğ‘™ğ‘’ğ‘”ğ‘Ÿğ‘ğ‘š,extended-matching
# OneDrive
RULE-SET,https://ruleset.isteed.cc/List/Surge/OneDrive.conf,ğ‘‚ğ‘›ğ‘’ğ·ğ‘Ÿğ‘–ğ‘£ğ‘’,extended-matching
# Streaming å›½é™…æµåª’ä½“æœåŠ¡
RULE-SET,https://ruleset.isteed.cc/List/Surge/Streaming.conf,ğ‘†ğ‘¡ğ‘Ÿğ‘’ğ‘ğ‘šğ‘–ğ‘›ğ‘”,extended-matching
# StreamingSE å›½å†…æµåª’ä½“æœåŠ¡
RULE-SET,https://ruleset.isteed.cc/List/Surge/StreamingSE.conf,ğ‘†ğ‘¡ğ‘Ÿğ‘’ğ‘ğ‘šğ‘–ğ‘›ğ‘”ğ‘†ğ¸,extended-matching
# Global å…¨çƒåŠ é€Ÿ
RULE-SET,https://ruleset.isteed.cc/List/Surge/Global.conf,ğ‘ƒğ‘Ÿğ‘œğ‘¥ğ‘¦,extended-matching
# China ä¸­å›½ç›´è¿
RULE-SET,https://ruleset.isteed.cc/List/Surge/China.conf,ğ·ğ‘–ğ‘Ÿğ‘’ğ‘ğ‘¡,extended-matching
# é˜²æ­¢åº”ç”¨å¾ªç¯è¯·æ±‚
IP-CIDR,0.0.0.0/32,ğ‘…ğ‘’ğ‘—ğ‘’ğ‘ğ‘¡,no-resolve
# æœ€ç»ˆè§„åˆ™
RULE-SET,SYSTEM,ğ·ğ‘–ğ‘Ÿğ‘’ğ‘ğ‘¡
RULE-SET,https://ruleset.isteed.cc/List/Surge/ChinaIP.conf,ğ·ğ‘–ğ‘Ÿğ‘’ğ‘ğ‘¡
RULE-SET,https://ruleset.isteed.cc/List/Surge/ChinaIPv6.conf,ğ·ğ‘–ğ‘Ÿğ‘’ğ‘ğ‘¡
# GEOIP,CN,ğ·ğ‘–ğ‘Ÿğ‘’ğ‘ğ‘¡
FINAL,ğ¹ğ‘–ğ‘›ğ‘ğ‘™,dns-failed

[URL Rewrite]
# é‡å®šå‘è°·æ­Œæœç´¢
^https?:\/\/(www.)?(g|google).cn https://www.google.com 307
# é‡å®šå‘è°·æ­Œåœ°å›¾
^https?:\/\/(ditu|maps).google\.cn https://maps.google.com 307

[MITM]
# è·³è¿‡æœåŠ¡ç«¯è¯ä¹¦éªŒè¯
skip-server-cert-verify = true
# MITM over HTTP/2
h2 = true
# ä¸»æœºå
hostname = *.google.cn
