# æœ¬é…ç½®æ–‡ä»¶åœ°å€: https://ruleset.isteed.cc/Config/surge.conf

# é£Ÿç”¨è¯´æ˜:
# å°† [Proxy Group] ä¸­çš„ https://example.com/sub æ›¿æ¢ä¸ºä½ çš„è®¢é˜…åœ°å€

[General]
# æ—¥å¿—ç­‰çº§
loglevel = notify
# å¢å¼ºçš„ Wi-Fi åŠ©ç†
wifi-assist = false
# æ··åˆç½‘ç»œ
all-hybrid = true
# åœ¨é«˜è´Ÿè½½æ—¶ä¼˜å…ˆå¤„ç† UDP æ•°æ®åŒ…ï¼ˆæ¸¸æˆä¼˜åŒ–ï¼‰
udp-priority = true
# TLS å¼•æ“
tls-provider = default
# Network Framework åŠŸèƒ½ï¼Œå…³é—­å¯ç¼“è§£å†…å­˜è¶…é™é—®é¢˜ï¼ˆæ— å¿…è¦å‹¿å–æ¶ˆæ³¨é‡Šï¼‰
# network-framework = false

# å»¶è¿Ÿæµ‹è¯•
test-timeout = 3
internet-test-url = https://bing.com
proxy-test-url = http://cp.cloudflare.com/generate_204

# IPv6 æ”¯æŒ
ipv6 = true

# ä¸Šæ¸¸ DNS åœ°å€
dns-server = 223.6.6.6, 119.29.29.29, system
# è·³è¿‡ä»£ç†
skip-proxy = localhost, *.local, injections.adguard.org, local.adguard.org, captive.apple.com, guzzoni.apple.com, 0.0.0.0/8, 10.0.0.0/8, 192.168.0.0/24, 172.16.0.0/12, 127.0.0.0/8
# æ’é™¤ç®€å•ä¸»æœºå
exclude-simple-hostnames = true
# åŒ…å«æ‰€æœ‰ç½‘ç»œè¯·æ±‚
include-all-networks = false
# åŒ…å«æœ¬åœ°ç½‘ç»œè¯·æ±‚
include-local-networks = false

# å…è®¸ Wi-Fi ç½‘ç»œä¸‹çš„å…¶å®ƒè®¾å¤‡è®¿é—®
allow-wifi-access = true
# Surge iOS é»˜è®¤ HTTP/SOCKS5 ç«¯å£ä¸º 6152/6153ï¼Œæˆ‘æ”¹æˆäº† Clash çš„ï½
wifi-access-http-port = 7890
wifi-access-socks5-port = 7890
# Surge Mac é»˜è®¤ HTTP/SOCKS5 ç«¯å£ä¸º 6152/6153
http-listen = 0.0.0.0:6152
socks5-listen = 0.0.0.0:6153
# å…è®¸çƒ­ç‚¹å…±äº«
allow-hotspot-access = true
# å…è®¸è¿œç¨‹æ§åˆ¶å™¨ç®¡ç†æ§åˆ¶ Surge
external-controller-access = surgepasswd@127.0.0.1:6170
http-api = 1145141919810@127.0.0.1:6166

[Replica]
# éšè—æ¥è‡ª Apple çš„è¯·æ±‚
hide-apple-request = 1
# éšè—æ¥è‡ªå´©æºƒåˆ†æçš„è¯·æ±‚
hide-crash-reporter-request = 1
hide-crashlytics-request = true
# éšè— UDP è¯·æ±‚
hide-udp = 1
# ä½¿ç”¨å…³é”®è¯è¿‡æ»¤å™¨
use-keyword-filter = false

[Proxy]

Direct = direct
Reject = reject
Reject-tinygif = reject

[Proxy Group]
Sub = select, hidden=true, policy-path=https://example.com/sub
Proxy = select, Autotest, Fallback, include-other-group=Sub
Streaming = select, Proxy, include-other-group=Sub, policy-regex-filter=è§£é”|åª’ä½“|åŸç”Ÿ|è§£é–|åª’é«”
StreamingSE = select, Direct, Proxy, include-other-group=Sub, policy-regex-filter=HK|TW|Hongkong|Taiwan|HongKong|TaiWan|Macau|æ¾³é—¨|[æ¸¯å°ğŸ‡­ğŸ‡°ğŸ‡²ğŸ‡´ğŸ‡¹ğŸ‡¼ğŸ‡¨ğŸ‡³]
Apple = select, Direct, Proxy
OneDrive = select, Direct, Proxy
Telegram = select, Proxy, include-other-group=Sub, policy-regex-filter=SG|US|NL|Singapore|United|Netherland|æ–°åŠ å¡|è·å…°|ç¾å›½|[ğŸ‡¸ğŸ‡¬ğŸ‡³ğŸ‡±ğŸ‡ºğŸ‡¸]
Guard = select, Reject, Reject-tinygif, Direct
Final = select, Proxy, Direct
Autotest = url-test, include-other-group=Sub
Fallback = fallback, include-other-group=Sub

[Rule]
# è‡ªç”¨è§„åˆ™
RULE-SET,https://ruleset.isteed.cc/List/Surge/DirectCustom.conf,Direct
RULE-SET,https://ruleset.isteed.cc/List/Surge/ProxyCustom.conf,Proxy
# Unbreak åç»­è§„åˆ™ä¿®æ­£
RULE-SET,https://ruleset.isteed.cc/List/Surge/Unbreak.conf,Direct
# Apple CDN
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/apple_cdn.conf,Direct
# Apple æœåŠ¡
RULE-SET,https://ruleset.skk.moe/List/non_ip/apple_services.conf,Apple
# Telegram
RULE-SET,https://ruleset.isteed.cc/List/Surge/Telegram.conf,Telegram
# OneDrive
RULE-SET,https://ruleset.isteed.cc/List/Surge/Telegram.conf,OneDrive
# Streaming å›½é™…æµåª’ä½“æœåŠ¡
RULE-SET,https://ruleset.isteed.cc/List/Surge/Streaming.conf,Streaming
# StreamingSE å›½å†…æµåª’ä½“æœåŠ¡
RULE-SET,https://ruleset.isteed.cc/List/Surge/StreamingSE.conf,StreamingSE
# Global å…¨çƒåŠ é€Ÿ
RULE-SET,https://ruleset.isteed.cc/List/Surge/Global.conf,Proxy
RULE-SET,https://ruleset.skk.moe/List/non_ip/global.conf,Proxy
# China ä¸­å›½ç›´è¿
RULE-SET,https://ruleset.isteed.cc/List/Surge/China.conf,Direct
# åƒåœ¾æœåŠ¡
DOMAIN-SET,https://ruleset.isteed.cc/List/Surge/Guard.conf,Guard
RULE-SET,LAN,Direct
# æœ€ç»ˆè§„åˆ™
GEOIP,CN,Direct
FINAL,Final,dns-failed

[URL Rewrite]
# é‡å®šå‘è°·æ­Œæœç´¢
^https?://(www.)?(g|google).cn https://www.google.com 302
# é‡å®šå‘è°·æ­Œåœ°å›¾
^https?:\/\/(ditu|maps).google\.cn https://maps.google.com 302

[MITM]
# è·³è¿‡æœåŠ¡ç«¯è¯ä¹¦éªŒè¯
skip-server-cert-verify = true
# MITM over HTTP/2
h2 = true
# ä¸»æœºå
hostname = *.google.cn
